<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elektriker Notdienst MÃ¼nchen 24h âš¡ QR-Zahlung & Videochat</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Montserrat',sans-serif; margin:0; background:#f5f5f5; color:#222; line-height:1.6; }
h1,h2 { text-align:center; margin-bottom:15px; }
header { background:linear-gradient(135deg,#111,#333); color:white; text-align:center; padding:60px 15px; }
header h1 { color:#FFD000; font-size:2.2em; }
header p { font-size:1.2em; margin-bottom:25px; }
.btn { display:inline-block; margin:10px 5px; padding:18px 35px; font-weight:700; text-decoration:none; border-radius:50px; font-size:1.2em; transition:all 0.3s ease; width:80%; max-width:300px; text-align:center; }
.btn-whatsapp { background:#25D366; color:white; }
.btn-whatsapp:hover { background:#1ebe57; transform:scale(1.05); }
.cta { background:linear-gradient(135deg,#FFD000,#FFC100); text-align:center; padding:60px 15px; border-radius:20px; margin:40px 0; }
#qr-code { max-width:300px; margin-top:20px; }
#payment-status { margin-top:15px;color:green;font-weight:bold;font-size:1.2em; }
footer { background:#111; color:white; text-align:center; padding:20px; font-size:0.9em; }
@media (max-width:480px){ header h1{font-size:1.8em;} .cta h2{font-size:1.5em;} .btn{padding:16px 25px;font-size:1.1em;} }
</style>
</head>
<body>

<header>
<h1>âš¡ Elektriker Notdienst MÃ¼nchen 24h</h1>
<p>Schnelle Hilfe per WhatsApp Videochat â€“ jetzt bezahlen & starten!</p>
</header>

<section class="cta">
<h2>ðŸ’³ Mobile Zahlung & Videochat starten</h2>
<p>Festpreis: 39,99 â‚¬ â€“ QR-Code scannen und direkt zahlen</p>

<div style="text-align:center;">
  <img id="qr-code" src="" alt="QR-Code fÃ¼r Zahlung">
  <div id="payment-status"></div>
  <a id="start-videochat" href="#" class="btn btn-whatsapp" style="display:none;" target="_blank">ðŸ’¬ Videochat starten</a>
</div>
</section>

<footer>
<p>Â© 2026 Elektriker Notdienst MÃ¼nchen â€“ 24h Video Hotline</p>
<p>Impressum | Datenschutz</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
// QR-Code generieren (Stripe Payment Link)
async function loadQRCode() {
  const res = await fetch("/create-qr-payment", { method:"POST" });
  const data = await res.json();
  if(data.url){
    QRCode.toDataURL(data.url, { width:300 }).then(url => { document.getElementById("qr-code").src = url; });
  }
}
loadQRCode();

// Polling: Zahlungsstatus prÃ¼fen
async function checkPayment() {
  const res = await fetch("/check-payment-status");
  const data = await res.json();
  if(data.paid){
    document.getElementById("qr-code").style.display="none";
    document.getElementById("payment-status").textContent="âœ… Zahlung abgeschlossen! Videochat wird gestartet...";
    const videochatUrl = "https://wa.me/4915145932462?text=Hallo%20ich%20brauche%20Hilfe%20bei%20einem%20Stromproblem";
    document.getElementById("start-videochat").style.display="inline-block";
    // Automatisch weiterleiten nach 2 Sekunden
    setTimeout(()=>{ window.location.href = videochatUrl; }, 2000);
  } else {
    setTimeout(checkPayment,5000);
  }
}
checkPayment();
</script>
</body>
</html>
