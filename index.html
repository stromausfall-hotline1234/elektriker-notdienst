<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KI-Soforthilfe Stromausfall</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Montserrat',sans-serif;background:#f0f2f5;color:#222;}
h1,h2,h3{margin:0 0 15px;}
button{padding:12px 20px;border:none;border-radius:8px;background:#25d366;color:white;cursor:pointer;transition:0.3s;font-weight:600;}
button:disabled{opacity:0.5;cursor:not-allowed;}
button:hover:not(:disabled){background:#1ebe57;}
nav{display:flex;justify-content:flex-end;gap:25px;padding:15px 20px;background:white;box-shadow:0 2px 8px rgba(0,0,0,0.05);}
nav a{color:#222;text-decoration:none;font-weight:600;}
nav a:hover{color:#25d366;}
header{padding:30px 20px;text-align:center;}
header button{font-size:1.1em;}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;z-index:1000;padding:10px;}
.modal-content{background:white;padding:20px;border-radius:12px;max-width:600px;width:100%;max-height:90vh;overflow:auto;box-shadow:0 6px 15px rgba(0,0,0,0.1);}
.summary{background:#f7f7f7;padding:12px;border-radius:8px;font-size:14px;margin-bottom:10px;}
.info-box{background:#fff3cd;padding:12px;border-radius:8px;border:1px solid #ffeeba;margin-bottom:12px;font-size:14px;}
#messages{height:200px;overflow-y:auto;border:1px solid #ccc;padding:10px;margin:10px 0;border-radius:8px;background:white;}
.message{padding:6px 10px;border-radius:10px;margin-bottom:5px;word-break:break-word;}
.message.user{background:#25d366;color:white;text-align:right;}
.message.ai{background:#ffca28;color:#111;text-align:left;}
input,textarea{width:100%;padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;}
footer{padding:15px;text-align:center;background:#111;color:#ffca28;font-size:14px;}
footer a{color:#ffca28;text-decoration:none;margin:0 8px;}
footer a:hover{text-decoration:underline;}
img.message{max-width:80%;border-radius:8px;margin-top:5px;}
@media(max-width:600px){
.modal-content{padding:15px;}
button{width:100%;margin-top:8px;}
nav{flex-direction:column;align-items:flex-start;}
header{padding:20px 10px;}
}
</style>
</head>
<body>

<nav>
<a href="#">impressum</a>
<a href="#">Datenschutz</a>
<a href="#">AGB</a>
</nav>

<header>
<h1>‚ö° KI-Soforthilfe Stromausfall</h1>
<p>Starten Sie die Soforthilfe mit Ihrem pers√∂nlichen Zugang.</p>
<button id="openCustomerBtn">Soforthilfe anfordern ‚Äì 39,99 ‚Ç¨</button>
</header>

<!-- Modal Kundeneingabe -->
<div class="modal" id="customerModal">
<div class="modal-content">
<h2>Kundendaten eingeben</h2>
<input id="name" placeholder="Vor- und Nachname" required>
<input id="address" placeholder="Adresse" required>
<input id="phone" placeholder="Telefonnummer" required>
<input id="email" placeholder="E-Mail-Adresse" required>
<label>
<input type="checkbox" id="consent">
Ich akzeptiere die <a href="#" onclick="event.preventDefault(); alert('Datenschutz bleibt im Modal sichtbar');">Datenschutzerkl√§rung</a>
</label>
<br><br>
<button id="startKiBtn" disabled>Hilfe anfordern</button>
<button onclick="closeCustomerModal()">Zur√ºck zur Hauptseite</button>
</div>
</div>

<!-- Modal Bestellzusammenfassung KI-Service -->
<div class="modal" id="kiSummaryModal">
<div class="modal-content">
<h2>Bestellzusammenfassung KI-Service</h2>
<div id="kiSummaryBox" class="summary"></div>
<div class="info-box">
<strong>Rechtssicherer Hinweis:</strong><br>
Die KI-Assistenz bietet Schritt-f√ºr-Schritt Unterst√ºtzung bei Stromproblemen. Verantwortung f√ºr Arbeiten an elektrischen Anlagen liegt beim Kunden. Leistung: 2 Minuten KI-Beratung.
</div>
<label><input type="checkbox" id="kiWiederruf"> Widerruf (<a href="#" onclick="event.preventDefault(); alert('Widerruf bleibt im Modal sichtbar');">Info</a>)</label><br>
<label><input type="checkbox" id="kiAgb"> AGB akzeptiert (<a href="#" onclick="event.preventDefault(); alert('AGB bleibt im Modal sichtbar');">lesen</a>)</label><br>
<label><input type="checkbox" id="kiConsent"> Gelesen & Einverstanden</label><br><br>
<button id="kiPayBtn" disabled>Geb√ºhrenpflichtig bestellen</button>
<button onclick="closeKiSummaryModal()">Zur√ºck zur Hauptseite</button>
</div>
</div>

<!-- KI-Chat Modal -->
<div class="modal" id="kiModal">
<div class="modal-content">
<h2>KI-Assistenz</h2>
<div class="info-box">‚ö† Sicherheitshinweis: Arbeiten an elektrischen Anlagen k√∂nnen gef√§hrlich sein.</div>
<div id="messages"></div>
<input type="text" id="userInput" placeholder="Beschreiben Sie Ihr Problem...">
<button id="sendBtn">Senden</button>
<input type="file" id="fileInput" accept="image/*"><br>
</div>
</div>

<!-- Eskalationsfenster -->
<div class="modal" id="escalationModal">
<div class="modal-content">
<h2>KI-Sitzung beendet</h2>
<p>Sie k√∂nnen nun einen Fachmann im Videocall anfordern:</p>
<button id="openExpertSummaryBtn">Fachmann anfordern</button>
<button onclick="closeEscalationModal()">Zur√ºck zur Hauptseite</button>
</div>
</div>

<!-- Modal Bestellzusammenfassung Fachmann -->
<div class="modal" id="expertSummaryModal">
<div class="modal-content">
<h2>Bestellzusammenfassung Fachmann</h2>
<div id="expertSummaryBox" class="summary"></div>
<div class="info-box">
<strong>Rechtssicherer Hinweis:</strong><br>
Der Expertenservice beinhaltet einen Live-Videocall mit qualifiziertem Fachpersonal. Verantwortung liegt beim Kunden. Leistungen erfolgen nur nach gebuchter Geb√ºhrenpflicht.
</div>
<label><input type="checkbox" id="expertWiederruf"> Widerruf (<a href="#" onclick="event.preventDefault(); alert('Widerruf bleibt im Modal sichtbar');">Info</a>)</label><br>
<label><input type="checkbox" id="expertAgb"> AGB akzeptiert (<a href="#" onclick="event.preventDefault(); alert('AGB bleibt im Modal sichtbar');">lesen</a>)</label><br>
<label><input type="checkbox" id="expertConsent"> Gelesen & Einverstanden</label><br><br>
<button id="expertPayBtn" disabled>Geb√ºhrenpflichtig bestellen</button>
<button onclick="closeExpertModal()">Zur√ºck zur Hauptseite</button>
</div>
</div>

<footer>
¬© 2026 KI-Soforthilfe
</footer>

<script>
// Elemente
const openCustomerBtn = document.getElementById("openCustomerBtn");
const customerModal = document.getElementById("customerModal");
const startKiBtn = document.getElementById("startKiBtn");
const consent = document.getElementById("consent");

const kiSummaryModal = document.getElementById("kiSummaryModal");
const kiSummaryBox = document.getElementById("kiSummaryBox");
const kiWiederruf = document.getElementById("kiWiederruf");
const kiAgb = document.getElementById("kiAgb");
const kiConsent = document.getElementById("kiConsent");
const kiPayBtn = document.getElementById("kiPayBtn");

const kiModal = document.getElementById("kiModal");
const messagesEl = document.getElementById("messages");
const userInputEl = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");
const fileInput = document.getElementById("fileInput");

const escalationModal = document.getElementById("escalationModal");
const openExpertSummaryBtn = document.getElementById("openExpertSummaryBtn");

const expertSummaryModal = document.getElementById("expertSummaryModal");
const expertSummaryBox = document.getElementById("expertSummaryBox");
const expertWiederruf = document.getElementById("expertWiederruf");
const expertAgb = document.getElementById("expertAgb");
const expertConsent = document.getElementById("expertConsent");
const expertPayBtn = document.getElementById("expertPayBtn");

const nameEl = document.getElementById("name");
const addressEl = document.getElementById("address");
const phoneEl = document.getElementById("phone");
const emailEl = document.getElementById("email");

let kiTimer;

// Kundeneingabe
openCustomerBtn.addEventListener("click",()=>{customerModal.style.display="flex";});
function closeCustomerModal(){customerModal.style.display="none";}
consent.addEventListener("change",()=>{startKiBtn.disabled = !consent.checked;});

// Start KI-Service ‚Üí Bestellzusammenfassung
startKiBtn.addEventListener("click",()=>{
    kiSummaryBox.innerHTML=`<strong>Kunde:</strong> ${nameEl.value}<br>
<strong>Adresse:</strong> ${addressEl.value}<br>
<strong>Telefon:</strong> ${phoneEl.value}<br>
<strong>E-Mail:</strong> ${emailEl.value}<br>
<strong>Leistung:</strong> KI-Soforthilfe (2 Minuten)`;
    customerModal.style.display="none";
    kiSummaryModal.style.display="flex";
});

// Checkboxen KI-Service
[kiWiederruf, kiAgb, kiConsent].forEach(el=>{el.addEventListener("change",()=>{kiPayBtn.disabled=!(kiWiederruf.checked && kiAgb.checked && kiConsent.checked);});});

// KI-Service buchen ‚Üí KI-Chat starten
kiPayBtn.addEventListener("click",()=>{
    alert("üí≥ KI-Service gebucht!");
    kiSummaryModal.style.display="none";
    kiModal.style.display="flex";
    messagesEl.innerHTML="";
    addMessage("KI: Hallo! Ich leite Sie Schritt f√ºr Schritt durch Ihr Stromproblem.","ai");
    kiTimer=setTimeout(()=>{endKiChat();},2*60*1000);
});

// Chat
function addMessage(content,sender){
    const div=document.createElement("div");
    div.className="message "+sender;
    if(typeof content==="string"){ div.innerText=content; } else{ div.appendChild(content); }
    messagesEl.appendChild(div);
    messagesEl.scrollTop=messagesEl.scrollHeight;
}
sendBtn.addEventListener("click",()=>{
    const txt=userInputEl.value.trim(); if(!txt) return;
    addMessage(txt,"user"); userInputEl.value="";
    addMessage("KI: Ich analysiere Ihre Eingabe...","ai");
    setTimeout(()=>{addMessage("KI: Bitte pr√ºfen Sie Sicherungen & FI-Schalter.","ai");},1000);
});
userInputEl.addEventListener("keypress",e=>{if(e.key==="Enter") sendBtn.click();});

// Bild Upload
fileInput.addEventListener("change",(e)=>{
    const file=e.target.files[0]; if(!file) return;
    const reader=new FileReader();
    reader.onload=function(ev){
        const img=document.createElement("img"); img.src=ev.target.result;
        addMessage(img,"user");
        setTimeout(()=>{addMessage("KI: Bild erhalten und analysiert. Pr√ºfen Sie Sicherungen & FI-Schalter.","ai");},1000);
    };
    reader.readAsDataURL(file); fileInput.value="";
});

// Ende KI ‚Üí Eskalation
function endKiChat(){kiModal.style.display="none"; escalationModal.style.display="flex";}

// Fachmann
openExpertSummaryBtn.addEventListener("click",()=>{
    expertSummaryBox.innerHTML=`<strong>Kunde:</strong> ${nameEl.value}<br>
<strong>Adresse:</strong> ${addressEl.value}<br>
<strong>Telefon:</strong> ${phoneEl.value}<br>
<strong>E-Mail:</strong> ${emailEl.value}<br>
<strong>Leistung:</strong> Expertenservice Videocall`;
    escalationModal.style.display="none";
    expertSummaryModal.style.display="flex";
});

// Checkboxen Expertenservice
[expertWiederruf, expertAgb, expertConsent].forEach(el=>{el.addEventListener("change",()=>{expertPayBtn.disabled=!(expertWiederruf.checked && expertAgb.checked && expertConsent.checked);});});

// Expertenservice ‚Üí WhatsApp
expertPayBtn.addEventListener("click",()=>{
    alert("üí≥ Expertenservice gebucht!");
    const whatsappNumber="4915145932462";
    window.open(`https://wa.me/${whatsappNumber}?text=Ich m√∂chte einen Live-Video-Call buchen`,"_blank");
    expertSummaryModal.style.display="none";
});

// Schlie√üen Modals
function closeKiSummaryModal(){kiSummaryModal.style.display="none";}
function closeEscalationModal(){escalationModal.style.display="none";}
function closeExpertModal(){expertSummaryModal.style.display="none";}
</script>
</body>
</html>
