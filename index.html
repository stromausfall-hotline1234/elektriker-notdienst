<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KI-Notdienst – Strom, Wasser & Heizung</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Montserrat',sans-serif;background:#f0f2f5;color:#222;}
h1,h2,h3{margin:0 0 15px;}
button{padding:12px 20px;border:none;border-radius:8px;background:#25d366;color:white;cursor:pointer;transition:0.3s;font-weight:600;}
button:disabled{opacity:0.5;cursor:not-allowed;}
button:hover:not(:disabled){background:#1ebe57;}
nav{display:flex;justify-content:flex-end;gap:25px;padding:15px 20px;background:white;box-shadow:0 2px 8px rgba(0,0,0,0.05);}
nav a{color:#222;text-decoration:none;font-weight:600;cursor:pointer;}
nav a:hover{color:#25d366;}
header{padding:30px 20px;text-align:center;}
header button{font-size:1.1em;}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;z-index:1000;padding:10px;}
.modal-content{background:white;padding:20px;border-radius:12px;max-width:600px;width:100%;max-height:90vh;overflow:auto;box-shadow:0 6px 15px rgba(0,0,0,0.1);}
.summary{background:#f7f7f7;padding:12px;border-radius:8px;font-size:14px;margin-bottom:10px;white-space:pre-wrap;}
.info-box{background:#fff3cd;padding:12px;border-radius:8px;border:1px solid #ffeeba;margin-bottom:12px;font-size:14px;display:none;}
input,textarea,select{width:100%;padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:8px;box-sizing:border-box;}
footer{padding:15px;text-align:center;background:#111;color:#ffca28;font-size:14px;}
footer a{color:#ffca28;text-decoration:none;margin:0 8px;}
footer a:hover{text-decoration:underline;}
@media(max-width:600px){
  .modal-content{padding:15px;}
  button{width:100%;margin-top:8px;}
  nav{flex-direction:column;align-items:flex-start;}
  header{padding:20px 10px;}
}
</style>
</head>
<body>

<!-- Obere Navigation -->
<nav>
  <a href="impressum.html" target="_blank">Impressum</a>
  <a href="datenschutz.html" target="_blank">Datenschutz</a>
  <a href="agb.html" target="_blank">AGB</a>
</nav>

<header>
<h1>⚡ KI-Notdienst – Strom, Wasser & Heizung</h1>
<p>Starten Sie die Soforthilfe mit Ihrem persönlichen Zugang.</p>
<button id="openCustomerBtn">Soforthilfe anfordern – 39,99 €</button>
</header>

<!-- Kundendaten & Notdienst Anfrage Modal -->
<div class="modal" id="customerModal">
  <div class="modal-content">
    <h2>Notdienst Anfrage</h2>

    <!-- Kundendaten -->
    <input id="name" placeholder="Vor- und Nachname">
    <input id="address" placeholder="Adresse">
    <input id="phone" placeholder="Telefonnummer">
    <input id="email" placeholder="E-Mail-Adresse">

    <label>
      <input type="checkbox" id="consent"> Ich akzeptiere die
      <a href="#" onclick="showInfo('datenschutz','modalInfoBoxCustomer');return false;">Datenschutzerklärung</a>
    </label>

    <div id="modalInfoBoxCustomer" class="info-box"></div>

    <hr>

    <!-- Service Typ -->
    <label for="serviceType">Service-Typ auswählen:</label>
    <select id="serviceType">
      <option value="">-- Bitte wählen --</option>
      <option value="electricity">Elektrik</option>
      <option value="water">Wasser</option>
      <option value="heating">Heizung</option>
    </select>

    <!-- Dynamische Symptome -->
    <div id="symptomsContainer"></div>

    <!-- Bild Upload -->
    <label for="fileInput">Fotos hochladen (optional):</label>
    <input type="file" id="fileInput" accept="image/*" multiple>

    <!-- Feedback & Zusatzinfos -->
    <textarea id="additionalInfo" placeholder="Weitere Informationen (optional)"></textarea>

    <button id="startKiBtn" disabled>KI-Triage starten</button>
    <button onclick="closeCustomerModal()">Zurück</button>
  </div>
</div>

<footer>
© 2026 KI-Notdienst
</footer>

<script>
// Rechtstexte
const infoTexts = {
  datenschutz: `<strong>Datenschutzerklärung</strong><br>Wir speichern Ihre Daten ausschließlich für die Rückruf- und Video-Beratung. Die Weitergabe an Dritte erfolgt nicht. Sie können Ihre Zustimmung jederzeit widerrufen. Weitere Informationen finden Sie in der AGB.`
};
function showInfo(type, containerId){
  const infoBox = document.getElementById(containerId);
  infoBox.innerHTML = infoTexts[type] + '<br><button onclick="this.parentElement.style.display=\'none\'">Schließen</button>';
  infoBox.style.display='block';
}

// Modal Steuerung
const customerModal = document.getElementById("customerModal");
const openCustomerBtn = document.getElementById("openCustomerBtn");
openCustomerBtn.addEventListener("click",()=>{customerModal.style.display="flex";});
function closeCustomerModal(){customerModal.style.display="none";}

// Elemente
const nameEl = document.getElementById("name");
const addressEl = document.getElementById("address");
const phoneEl = document.getElementById("phone");
const emailEl = document.getElementById("email");
const consentEl = document.getElementById("consent");
const serviceTypeEl = document.getElementById("serviceType");
const symptomsContainer = document.getElementById("symptomsContainer");
const startKiBtn = document.getElementById("startKiBtn");
const fileInput = document.getElementById("fileInput");

// Symptome pro Service-Typ
const serviceSymptoms = {
  electricity: ["FI-Schalter ausgelöst","Sicherung durchgebrannt","Komplettausfall","Geräusche / Funken"],
  water: ["Rohrbruch / Leck","Kein Wasser","Wasser tropft","Pumpe defekt"],
  heating: ["Heizung kalt","Thermostat defekt","Boiler / Warmwasser aus","Heizung ungleichmäßig"]
};

// Dynamische Symptom Checkboxen
serviceTypeEl.addEventListener("change", () => {
  const type = serviceTypeEl.value;
  symptomsContainer.innerHTML = "";
  if (!type) return;
  serviceSymptoms[type].forEach(symptom => {
    const div = document.createElement("div");
    div.innerHTML = `<label><input type="checkbox" class="symptomCheckbox" value="${symptom}"> ${symptom}</label>`;
    symptomsContainer.appendChild(div);
  });
  updateStartKiBtn();
});

// KI-Triage Button aktivieren
[nameEl,addressEl,phoneEl,emailEl,consentEl,serviceTypeEl].forEach(el=>{
  el.addEventListener("input",updateStartKiBtn);
  el.addEventListener("change",updateStartKiBtn);
});
function updateStartKiBtn(){
  const hasSymptoms = document.querySelectorAll('.symptomCheckbox:checked').length > 0;
  startKiBtn.disabled = !(nameEl.value && addressEl.value && phoneEl.value && emailEl.value && consentEl.checked && serviceTypeEl.value && hasSymptoms);
}

// Start KI-Triage (Simulation)
startKiBtn.addEventListener("click", ()=>{
  const selectedSymptoms = Array.from(document.querySelectorAll('.symptomCheckbox:checked')).map(cb => cb.value);
  const data = {
    name: nameEl.value,
    address: addressEl.value,
    phone: phoneEl.value,
    email: emailEl.value,
    serviceType: serviceTypeEl.value,
    symptoms: selectedSymptoms,
    additionalInfo: document.getElementById("additionalInfo").value
  };
  console.log("KI-Triage Daten:", data);
  alert("Daten an KI gesendet! (Simulation)");
  closeCustomerModal();
});

// Bild Upload
fileInput.addEventListener("change", (e)=>{
  const files = Array.from(e.target.files);
  files.forEach(file => {
    const reader = new FileReader();
    reader.onload = function(ev){
      console.log("Bild für KI:", file.name, ev.target.result);
    };
    reader.readAsDataURL(file);
  });
});
</script>
</body>
</html>
