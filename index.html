<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elektriker Notdienst MÃ¼nchen 24h âš¡ QR-Zahlung & Videochat</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Montserrat',sans-serif; margin:0; background:#f5f5f5; color:#222; line-height:1.6; }
header { background:linear-gradient(135deg,#111,#333); color:white; text-align:center; padding:60px 15px; }
header h1 { color:#FFD000; font-size:2.2em; margin-bottom:10px; }
header p { font-size:1.2em; margin-bottom:20px; }
section { text-align:center; padding:40px 15px; max-width:600px; margin:auto; }
.btn { display:inline-block; margin:10px 5px; padding:18px 35px; font-weight:700; text-decoration:none; border-radius:50px; font-size:1.2em; transition:all 0.3s ease; cursor:pointer; background:#25D366; color:white; }
.btn:hover { transform:scale(1.05); background:#1ebe57; }
#qr-code { margin-top:20px; max-width:300px; display:none; }
#payment-status { margin-top:15px; font-weight:bold; color:green; font-size:1.2em; }
.services li { list-style:none; padding:15px 0; border-bottom:1px solid #ddd; font-size:1.1em; }
.services li::before { content:"âœ” "; color:#FFD000; font-weight:bold; }
.testimonial { background:white; border-radius:15px; padding:20px; box-shadow:0 3px 10px rgba(0,0,0,0.1); margin-bottom:20px; text-align:left; }
.testimonial p { font-style:italic; }
.testimonial h4 { margin-top:10px; font-weight:600; }
footer { background:#111; color:white; text-align:center; padding:20px; font-size:0.9em; margin-top:40px;}
a { color:#FFD000; text-decoration:underline; }
@media (max-width:480px){ header h1{font-size:1.8em;} .btn{padding:16px 25px;font-size:1.1em;} }
</style>
</head>
<body>

<header>
<h1>âš¡ Elektriker Notdienst MÃ¼nchen 24h</h1>
<p>Zahlen & Videochat starten per QR-Code â€“ schnelle Hilfe bei Stromausfall</p>
</header>

<section>
<h2>Unsere Leistungen</h2>
<ul class="services">
<li>24h Notdienst â€“ auch an Feiertagen</li>
<li>Fehlerdiagnose direkt per WhatsApp Videochat</li>
<li>Stromausfall schnell beheben</li>
<li>Kurzschluss & FI-Schalter Problem</li>
</ul>
</section>

<section>
<h2>ðŸ’³ Zahlung & Videochat starten</h2>
<p>Festpreis: 39,99 â‚¬ â€“ QR-Code wird nach Klick auf Button generiert</p>
<button id="start-btn" class="btn">ðŸ’³ QR-Code generieren</button>
<div>
  <img id="qr-code" src="" alt="QR-Code">
  <div id="payment-status"></div>
</div>
</section>

<section>
<h2>Kundenbewertungen</h2>
<div class="testimonial">
<p>"Schnelle Hilfe per Videochat â€“ Stromausfall war in 30 Minuten behoben!"</p>
<h4>â€“ Maria S., MÃ¼nchen</h4>
</div>
<div class="testimonial">
<p>"Sehr freundlich & kompetent, auch Ã¼ber WhatsApp Videochat. Absolut empfehlenswert!"</p>
<h4>â€“ Thomas K., MÃ¼nchen</h4>
</div>
</section>

<section id="impressum">
<h2>Impressum</h2>
<p><strong>Betreiber / Anbieter:</strong><br>
Elektriker Notdienst MÃ¼nchen GmbH<br>
Max-Mustermann-StraÃŸe 12<br>
80333 MÃ¼nchen, Deutschland</p>

<p><strong>Vertreten durch:</strong><br>
GeschÃ¤ftsfÃ¼hrer: Max Mustermann</p>

<p><strong>Kontakt:</strong><br>
Telefon: +49 151 45932462<br>
E-Mail: <a href="mailto:info@elektriker-muenchen.de">info@elektriker-muenchen.de</a></p>

<p><strong>Umsatzsteuer-ID:</strong><br>
DE123456789</p>

<p><strong>Handelsregister:</strong><br>
Amtsgericht MÃ¼nchen, HRB 123456</p>

<p><strong>Verantwortlich fÃ¼r Inhalte nach Â§ 55 Abs. 2 RStV:</strong><br>
Max Mustermann, Max-Mustermann-StraÃŸe 12, 80333 MÃ¼nchen</p>
</section>

<section id="datenschutz">
<h2>Datenschutz</h2>
<p>Wir erheben keine unnÃ¶tigen Daten. Bei Nutzung des WhatsApp Videochats werden nur die Ã¼blichen Daten fÃ¼r Kommunikation & Zahlung verarbeitet. Ihre Daten werden vertraulich behandelt und nicht an Dritte weitergegeben.</p>
</section>

<footer>
<p>Â© 2026 Elektriker Notdienst MÃ¼nchen â€“ 24h Video Hotline</p>
<p><a href="#impressum">Impressum</a> | <a href="#datenschutz">Datenschutz</a></p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
// Funktion fÃ¼r Rechnungsnummer
function generateInvoiceNumber(){
  const date = new Date();
  return 'INV-'+date.getFullYear()+('0'+(date.getMonth()+1)).slice(-2)+('0'+date.getDate()).slice(-2)+'-'+Math.floor(Math.random()*9000+1000);
}

const startBtn = document.getElementById('start-btn');
const qrImg = document.getElementById('qr-code');
const statusDiv = document.getElementById('payment-status');

startBtn.addEventListener('click', async ()=>{
  startBtn.disabled = true;
  const invoice = generateInvoiceNumber();
  
  // Demo: QR-Code zeigt URL mit Rechnungsnummer
  const paymentUrl = `/create-qr-payment?invoice=${invoice}`; // Backend erzeugt echten Stripe Payment Link
  const qrDataUrl = await QRCode.toDataURL(paymentUrl, { width: 300 });
  
  qrImg.src = qrDataUrl;
  qrImg.style.display = 'inline-block';
  statusDiv.textContent = "Bitte QR-Code scannen und bezahlen...";

  // Polling: Zahlungsstatus prÃ¼fen
  const checkPayment = async ()=>{
    const res = await fetch(`/check-payment-status?invoice=${invoice}`);
    const data = await res.json();
    if(data.paid){
      qrImg.style.display="none";
      statusDiv.textContent="âœ… Zahlung erfolgreich! Videochat wird gestartet...";
      setTimeout(()=>{
        window.location.href = "https://wa.me/4915145932462?text=Hallo%20ich%20brauche%20Hilfe%20bei%20einem%20Stromproblem";
      },2000);
    } else {
      setTimeout(checkPayment,5000);
    }
  };
  checkPayment();
});
</script>
</body>
</html>
