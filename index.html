<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KI-Soforthilfe Stromausfall</title>

<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f2f4f7;}
nav{display:flex;justify-content:flex-end;gap:20px;padding:15px;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,0.08);}
nav a{text-decoration:none;font-weight:bold;color:#333;}
nav a:hover{color:#25d366;}
header{text-align:center;padding:40px 20px;}
button{padding:12px 20px;border:none;border-radius:8px;background:#25d366;color:white;font-weight:bold;cursor:pointer;}
button:disabled{opacity:0.5;}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);justify-content:center;align-items:center;padding:10px;z-index:1000;}
.modal-content{background:#fff;padding:20px;border-radius:10px;width:100%;max-width:600px;max-height:90vh;overflow:auto;}
input{width:100%;padding:10px;margin:5px 0;border-radius:6px;border:1px solid #ccc;}
.summary{background:#f7f7f7;padding:10px;border-radius:6px;white-space:pre-wrap;margin-bottom:10px;}
#messages{height:180px;overflow-y:auto;border:1px solid #ccc;padding:10px;margin:10px 0;border-radius:6px;background:#fff;}
.message{padding:6px;margin-bottom:5px;border-radius:6px;}
.user{background:#25d366;color:white;text-align:right;}
.ai{background:#ffc107;}
#progressContainer{width:100%;background:#ddd;border-radius:6px;margin:10px 0;}
#progressBar{width:0%;height:12px;background:#25d366;}
#countdown{font-weight:bold;margin-bottom:10px;}
.info-box{display:none;background:#fff3cd;padding:10px;border-radius:6px;margin:10px 0;}
</style>
</head>

<body>

<nav>
<a href="impressum.html" target="_blank">Impressum</a>
<a href="datenschutz.html" target="_blank">Datenschutz</a>
<a href="agb.html" target="_blank">AGB</a>
</nav>

<header>
<h1>‚ö° KI-Soforthilfe Stromausfall</h1>
<button id="openCustomerBtn">Soforthilfe anfordern ‚Äì 39,99 ‚Ç¨</button>
</header>

<!-- Kundendaten -->
<div class="modal" id="customerModal">
<div class="modal-content">
<h2>Kundendaten</h2>
<input id="name" placeholder="Name">
<input id="address" placeholder="Adresse">
<input id="phone" placeholder="Telefon">
<input id="email" placeholder="E-Mail">
<label><input type="checkbox" id="consent"> Datenschutz akzeptieren</label>
<button id="startKiBtn" disabled>Weiter</button>
</div>
</div>

<!-- KI Summary -->
<div class="modal" id="kiSummaryModal">
<div class="modal-content">
<h2>Bestell√ºbersicht KI-Service</h2>
<div id="kiSummaryBox" class="summary"></div>
<p><b>Leistung:</b> 2 Minuten KI-Video-Beratung. Keine Vor-Ort-Ausf√ºhrung.</p>
<label><input type="checkbox" id="kiAgree"> Einverstanden mit AGB & Widerruf</label>
<button id="kiPayBtn" disabled>Geb√ºhrenpflichtig bestellen</button>
</div>
</div>

<!-- Experten Summary -->
<div class="modal" id="expertSummaryModal">
<div class="modal-content">
<h2>Bestell√ºbersicht Fachmann-Service</h2>
<div id="expertSummaryBox" class="summary"></div>
<p><b>Leistung:</b> Live-Video-Call mit Fachmann via WhatsApp.</p>
<label><input type="checkbox" id="expertAgree"> Einverstanden mit AGB & Widerruf</label>
<button id="expertPayBtn" disabled>Geb√ºhrenpflichtig bestellen</button>
</div>
</div>

<!-- Payment Modal -->
<div class="modal" id="paymentModal">
<div class="modal-content">
<h2>Zahlung</h2>

<div id="paymentCustomer" style="color:#25d366;font-weight:bold;margin-bottom:10px;"></div>
<div id="paymentLegal" style="color:#ff6600;font-weight:bold;margin-bottom:10px;"></div>
<div id="paymentImpressum" style="color:#0077cc;font-weight:bold;margin-bottom:15px;"></div>

<button onclick="simulatePayment('Kreditkarte')">üí≥ Kreditkarte</button>
<button onclick="simulatePayment('PayPal')">PayPal</button>
<button onclick="simulatePayment('ApplePay')">Apple/Google Pay</button>
</div>
</div>

<!-- KI Modal -->
<div class="modal" id="kiModal">
<div class="modal-content">
<h2>KI Assistenz</h2>
<div id="progressContainer"><div id="progressBar"></div></div>
<div id="countdown">02:00</div>
<div id="messages"></div>
<input id="userInput" placeholder="Problem beschreiben">
<button id="sendBtn">Senden</button>
<input type="file" id="fileInput">
</div>
</div>

<!-- Eskalation -->
<div class="modal" id="escalationModal">
<div class="modal-content">
<h2>KI beendet</h2>
<button id="openExpertBtn">Fachmann anfordern</button>
</div>
</div>

<script>

const customerModal=document.getElementById("customerModal");
const kiSummaryModal=document.getElementById("kiSummaryModal");
const expertSummaryModal=document.getElementById("expertSummaryModal");
const paymentModal=document.getElementById("paymentModal");
const kiModal=document.getElementById("kiModal");
const escalationModal=document.getElementById("escalationModal");

let currentService="";

// Kundendaten
openCustomerBtn.onclick=()=>customerModal.style.display="flex";
const inputs=["name","address","phone","email","consent"];
inputs.forEach(id=>document.getElementById(id).addEventListener("input",checkCustomer));
function checkCustomer(){
startKiBtn.disabled=!(name.value && address.value && phone.value && email.value && consent.checked);
}
startKiBtn.onclick=()=>{
customerModal.style.display="none";
kiSummaryModal.style.display="flex";
kiSummaryBox.innerText=`Name: ${name.value}\nAdresse: ${address.value}\nTelefon: ${phone.value}\nE-Mail: ${email.value}`;
};

kiAgree.onchange=()=>kiPayBtn.disabled=!kiAgree.checked;
expertAgree.onchange=()=>expertPayBtn.disabled=!expertAgree.checked;

kiPayBtn.onclick=()=>openPayment("KI");
expertPayBtn.onclick=()=>openPayment("Expert");

function openPayment(service){
currentService=service;
paymentCustomer.innerText=`Kundendaten:\n${name.value}\n${address.value}\n${phone.value}\n${email.value}`;
paymentLegal.innerText=service==="KI"?
"KI-Service: 2 Minuten digitale Beratung.":
"Fachmann-Service: Live-Video-Call via WhatsApp.";
paymentImpressum.innerText="KI-Soforthilfe GmbH\nMusterstra√üe 1\n12345 Musterstadt";
paymentModal.style.display="flex";
}

function simulatePayment(method){
alert("Zahlung erfolgreich via "+method);
paymentModal.style.display="none";

if(currentService==="KI"){
kiSummaryModal.style.display="none";
kiModal.style.display="flex";
startSession();
}

if(currentService==="Expert"){
expertSummaryModal.style.display="none";
const text=encodeURIComponent(`Live-Call Buchung\n${name.value}\n${phone.value}`);
window.open("https://wa.me/4915145932462?text="+text,"_blank");
}
}

// KI Session
function startSession(){
let time=120;
const bar=document.getElementById("progressBar");
const cd=document.getElementById("countdown");
const interval=setInterval(()=>{
time--;
bar.style.width=((120-time)/120*100)+"%";
cd.innerText=`${Math.floor(time/60)}:${("0"+(time%60)).slice(-2)}`;
if(time<=0){
clearInterval(interval);
kiModal.style.display="none";
escalationModal.style.display="flex";
}
},1000);
}

sendBtn.onclick=()=>{
messages.innerHTML+=`<div class='message user'>${userInput.value}</div>`;
messages.innerHTML+=`<div class='message ai'>Bitte pr√ºfen Sie Sicherungen & FI-Schalter.</div>`;
userInput.value="";
};

openExpertBtn.onclick=()=>{
escalationModal.style.display="none";
expertSummaryModal.style.display="flex";
expertSummaryBox.innerText=`Name: ${name.value}\nTelefon: ${phone.value}`;
};

</script>

</body>
</html>
